<!DOCTYPE html>
<html>
  <head>
    <link rel="icon" type="image/png" href="favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@100..900&display=swap" rel="stylesheet">

    <title>LOCA! for TOURSIM!</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAvhWKvZj7MEbUaHvW_xwiZCvL70gi-wyM"></script>
    
    <style>
      
      #sidebar {
        position: fixed;
        top: 0;
        right: 0;
        width: 300px;
        height: 100vh;
        background-color: rgba(255, 255, 255, 0.9);
        z-index: 1;
        overflow-y: auto;
        margin-top: 80px;
        opacity: 0; /* Start with sidebar hidden */
        transition: opacity 0.5s ease-in-out; /* Smooth transition for opacity */
        display: none; /* Initially not displayed */
      }

      #logo{
        position: absolute;
        top: 75px;
        left: 4%;
        width: 120px;
        z-index: 2;
        opacity: 0.7;
      }
      #logo:hover{
        opacity: 1;
      }

      footer{
        position: absolute;
        bottom: 0;
        width: 100%;
        height: 50px;
        background-color: black;
        color: white;
        text-align: center;
        z-index: 100;
        font-size: 0.6em;
      }
      a{
        color: rgb(188, 188, 188);
        text-decoration: none;
      }
      a:hover{
        color: white;
      }

      p{
        font-size: 0.6em;
      }

      #info{
        color: rgb(103, 103, 103);
        text-decoration: none;
        font-size: 1em;
      }
      #info:hover{
        color: white;
      }
      #caption{
        color: rgb(103, 103, 103);
        text-decoration: none;
        font-size: 0.6em;
      }

      #imdb{
        color: grey;
      }

      #map-container {
        position: relative;
        height: 100vh;
        width: 100%;
        overflow: hidden;
        background-color: black;
      }
      #map {
        height: calc(100% - 100px); /* Account for the black bars */
        width: 100%;
      }
      .black-bar {
        position: absolute;
        width: 100%;
        height: 100px;
        background-color: black;
        z-index: 2;
      }
      .top-bar {
        top: 0;
      }
      .bottom-bar {
        bottom: 0;
      }
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
        font-family: "Noto Sans TC", Arial, Helvetica, sans-serif;
        cursor: crosshair;
      }
      h1{
        color: rgb(29, 29, 29);
        font-family: "Noto Sans TC", Arial, Helvetica, sans-serif;
        font-size: 1.5em;
      }
    </style>
  </head>
  <body>
    <div id="sidebar"></div>
    <div id="map-container">
      <div id="search-container" style="position: absolute; top: 10px; left: 50%; transform: translateX(-50%); z-index: 5;">
        <input type="text" id="search-box" placeholder="Search film and drama..." style="width: 300px; height: 20px; font-size: 16px;">
        <button id="search-button">Search</button> <!-- Search button added here -->
      </div>

      
      <div id="map"></div>
      
      <div class="black-bar top-bar"></div>
      <img id="logo" src="asset/LOCA_white.png" alt="LOCA!">
      <div class="black-bar bottom-bar"></div>
      
    </div>
    <script>
      function initMap() {
        const map = new google.maps.Map(document.getElementById("map"), {
          center: { lat: 22.3193, lng: 114.1694 }, // Center the map around Hong Kong
          zoom: 11,
          styles: [
            {
              "elementType": "geometry",
              "stylers": [{ "color": "#212121" }]
            },
            {
              "elementType": "labels.icon",
              "stylers": [{ "visibility": "off" }]
            },
            {
              "elementType": "labels.text.fill",
              "stylers": [{ "color": "#757575" }]
            },
            {
              "elementType": "labels.text.stroke",
              "stylers": [{ "color": "#212121" }]
            },
            {
              "featureType": "administrative",
              "elementType": "geometry",
              "stylers": [{ "color": "#757575" }]
            },
            {
              "featureType": "administrative.country",
              "elementType": "labels.text.fill",
              "stylers": [{ "color": "#9e9e9e" }]
            },
            {
              "featureType": "administrative.land_parcel",
              "stylers": [{ "visibility": "off" }]
            },
            {
              "featureType": "administrative.locality",
              "elementType": "labels.text.fill",
              "stylers": [{ "color": "#bdbdbd" }]
            },
            {
              "featureType": "poi",
              "elementType": "labels.text.fill",
              "stylers": [{ "color": "#757575" }]
            },
            {
              "featureType": "poi.park",
              "elementType": "geometry",
              "stylers": [{ "color": "#181818" }]
            },
            {
              "featureType": "poi.park",
              "elementType": "labels.text.fill",
              "stylers": [{ "color": "#616161" }]
            },
            {
              "featureType": "poi.park",
              "elementType": "labels.text.stroke",
              "stylers": [{ "color": "#1b1b1b" }]
            },
            {
              "featureType": "road",
              "elementType": "geometry.fill",
              "stylers": [{ "color": "#2c2c2c" }]
            },
            {
              "featureType": "road",
              "elementType": "labels.text.fill",
              "stylers": [{ "color": "#8a8a8a" }]
            },
            {
              "featureType": "road.arterial",
              "elementType": "geometry",
              "stylers": [{ "color": "#373737" }]
            },
            {
              "featureType": "road.highway",
              "elementType": "geometry",
              "stylers": [{ "color": "#3c3c3c" }]
            },
            {
              "featureType": "road.highway.controlled_access",
              "elementType": "geometry",
              "stylers": [{ "color": "#4e4e4e" }]
            },
            {
              "featureType": "road.local",
              "elementType": "labels.text.fill",
              "stylers": [{ "color": "#616161" }]
            },
            {
              "featureType": "transit",
              "elementType": "labels.text.fill",
              "stylers": [{ "color": "#757575" }]
            },
            {
              "featureType": "water",
              "elementType": "geometry",
              "stylers": [{ "color": "#000000" }]
            },
            {
              "featureType": "water",
              "elementType": "labels.text.fill",
              "stylers": [{ "color": "#3d3d3d" }]
            }
          ]
        });

        const locations = [
          { film_name: "Infernal Affairs", CN_name: "無間道", URL:"https://www.imdb.com/title/tt0338564/", year:"2002", address: "10 Chatham Rd S, Tsim Sha Tsui, Hong Kong", lat: 22.2976, lng: 114.1729, picture: "asset/movie/infernal-affairs.png" },
          { film_name: "Chungking Express", CN_name: "重慶森林", URL:"https://www.imdb.com/title/tt0109424/", year:"1994", address: "Chungking Mansions, 36-44 Nathan Rd, Tsim Sha Tsui, Hong Kong", lat: 22.2977, lng: 114.1729, picture: "asset/movie/chungking.jpg" },
          { film_name: "The Killer", CN_name: "喋血雙雄", URL:"https://www.imdb.com/title/tt0097202/", year:"1989", address: "Yau Ma Tei Fruit Market, Reclamation St, Yau Ma Tei, Hong Kong", lat: 22.3090, lng: 114.1684, picture: "asset/movie/infernal-affairs.png" },
          { film_name: "In the Mood for Love", CN_name: "花樣年華", URL:"https://www.imdb.com/title/tt0118694/", year:"2000", address: "Morse Park, 1 Morse Park Rd, Wong Tai Sin, Hong Kong", lat: 22.3461, lng: 114.2026, picture: "asset/movie/infernal-affairs.png" },
          { film_name: "Police Story", CN_name: "警察故事", URL:"https://www.imdb.com/title/tt0089374/", year:"1985", address: "Tai Po Police Station, 44 Ting Kok Rd, Tai Po, Hong Kong", lat: 22.4509, lng: 114.1595, picture: "asset/movie/infernal-affairs.png" },
          { film_name: "A Better Tomorrow", CN_name: "英雄本色", URL:"https://www.imdb.com/title/tt0092263/", year:"1986", address: "Jackson Road, Central, Hong Kong", lat: 22.28127, lng: 114.1608, picture: "asset/movie/bettertomorrow.jpg" },
          { film_name: "Internal Affairs", CN_name: "無間道", URL:"https://www.imdb.com/title/tt0338564/", year:"2002", address: "Central Police Station, 10 Hollywood Rd, Central, Hong Kong", lat: 22.2830, lng: 114.1476, picture: "asset/movie/infernal-affairs.png" },
          { film_name: "Kung Fu Hustle", CN_name: "功夫", URL:"https://www.imdb.com/title/tt0119217/", year:"2004", address: "Lam Tei Quarry, Lam Tei, Hong Kong", lat: 22.3707, lng: 114.0165, picture: "asset/movie/infernal-affairs.png" },
          { film_name: "Shaolin Soccer", CN_name: "少林足球", URL:"https://www.imdb.com/title/tt0286112/", year:"2001", address: "Tseung Kwan O Industrial Estate, Tseung Kwan O, Hong Kong", lat: 22.3139, lng: 114.2647, picture: "asset/movie/infernal-affairs.png" },
          { film_name: "Fallen Angel", CN_name: "墮落天使", URL:"https://www.imdb.com/title/tt0112913/", year:"1995", address: "Sai Wan Ho MTR Station, Hong Kong", lat: 22.28238129728914, lng: 114.2223959967271, picture: "asset/movie/fallen-angel.jpg" },
          { film_name: "Full Throttle", CN_name: "烈火戰車", URL:"https://www.imdb.com/title/tt0113651/", year:"1995", address: "Cape Collinson Battery 歌連臣角炮台, Hong Kong Island, Hong Kong", lat: 22.25361169047287, lng: 114.25551432618445, picture: "asset/movie/fullthrottle.png" },
          { film_name: "Lan Kwai Fong", CN_name: "喜愛夜蒲 1/2", URL:"https://www.imdb.com/title/tt1988689/", year:"2011", address: "Lan Kwai Fong, Hong Kong Island, Hong Kong", lat: 22.28194334083403, lng: 114.15577800738939, picture: "asset/movie/lankwaifong.png" },
          { film_name: "Life After Death", CN_name: "那些我愛過的人", URL:"https://www.discoverhongkong.com/tc/explore/great-outdoor/wellness/high-island-geo-trail.html", year:"2019", address: "High Island Reservoir East Dam 萬宜水庫東壩, Sai Kung, Hong Kong", lat: 22.37040099949507, lng: 114.37340747772033, picture: "asset/drama/life-after-death_res2.png", direction:"https://maps.app.goo.gl/PzaMpP219UggWi9v9" },
          { film_name: "Chasing the Dragon", CN_name: "追龍", URL: "https://www.imdb.com/title/tt6015328/",year: "2017",address: "Shek Kip Mei Estate, Sham Shui Po, Hong Kong",lat: 22.3312,lng: 114.1615, picture: "asset/movie/chasing-the-dragon.png" },
          { film_name: "The Exorcist's Meter", CN_name: "降魔的", URL:"https://www.imdb.com/title/tt10667354/", year:"2017", address: "Western District Public Cargo Working Area 西區公眾貨物裝卸區, Kennedy Town, Hong Kong", lat: 22.289354733460023, lng: 114.1338123148117, picture: "asset/drama/exor.png" }
        ];
        
        
        let currentIndex = 0;
        let infoWindow = new google.maps.InfoWindow(); // Create a single InfoWindow instance


        function showLocation(index) {
      const location = locations[index];
      const sidebar = document.getElementById('sidebar');
      sidebar.innerHTML = `<div style='padding: 20px;'>
        <a id="info" href="${location.URL}" target="_blank"><h1>${location.film_name} 
          <br>${location.CN_name} (${location.year})</h1></a>
        <p>${location.address}</p>
        <p>Latitude: ${location.lat}<br>Longitude: ${location.lng}</p>
        <br>
        <img src='${location.picture}' alt='${location.film_name}' style='width:100%;'>
        <p id="caption">image: source</p>
        <button onclick="navigate(-1)"><</button>
        <button onclick="navigate(1)">></button>
        </div>`;
      sidebar.style.display = 'block';
      sidebar.style.opacity = 1;

       // Zoom in and center the map on the new location
       map.setZoom(13); // Zoom level can be adjusted as needed
      map.setCenter(new google.maps.LatLng(location.lat, location.lng));

      //zoom out
      setTimeout(() => {
        map.setZoom(11); // Zoom out to the original zoom level
      }, 12000); //   TIME 10000 10seconds

      // infoWindow at the marker position
      infoWindow.setContent(`<div><strong>${location.address}</strong><br>${location.film_name} ${location.CN_name}</div>`);
      infoWindow.setPosition(new google.maps.LatLng(location.lat+0.001, location.lng));
      infoWindow.open(map);
    }

    function navigate(direction) {
      currentIndex += direction;
      if (currentIndex < 0) {
        currentIndex = locations.length - 1; // Wrap around to the last item
      } else if (currentIndex >= locations.length) {
        currentIndex = 0; // Wrap around to the first item
      }
      showLocation(currentIndex);
    }

    locations.forEach((location, index) => {
      const originalSize = new google.maps.Size(40, 23); // Original icon size
      const enlargedSize = new google.maps.Size(80, 45); // Enlarged icon size

      const marker = new google.maps.Marker({
        position: { lat: location.lat, lng: location.lng },
        map: map,
        title: location.film_name,
        opacity: 0.7,
        icon: {
          url: location.picture,
          scaledSize: originalSize,
          origin: new google.maps.Point(0, 0),
          anchor: new google.maps.Point(20, 20)
        },
        label: {
          text: location.film_name,
          color: 'white',
          fontSize: '12px',
          fontWeight: 'bold'
        }
      });

      marker.addListener('mouseover', function () {
        animateMarker(marker, enlargedSize, 150); // Animate to larger size
      });

      marker.addListener('mouseout', function () {
        animateMarker(marker, originalSize, 150); // Animate back to original size
      });

      marker.addListener("click", () => {
        currentIndex = index;
        showLocation(currentIndex);
      });
    });

    window.navigate = navigate;
    window.onload = () => showLocation(0);
      }
      function animateMarker(marker, size, duration) {
    const start = new Date().getTime();
    const end = start + duration;
    const startSize = marker.getIcon().scaledSize;
    const deltaWidth = size.width - startSize.width;
    const deltaHeight = size.height - startSize.height;

    const timer = setInterval(function () {
      const time = new Date().getTime();
      const p = (time - start) / (end - start);

      if (time < end) {
        marker.setIcon({
          url: marker.getIcon().url,
          scaledSize: new google.maps.Size(startSize.width + deltaWidth * p, startSize.height + deltaHeight * p),
          origin: new google.maps.Point(0, 0),
          anchor: new google.maps.Point(20, 20)
        });
      } else {
        marker.setIcon({
          url: marker.getIcon().url,
          scaledSize: size,
          origin: new google.maps.Point(0, 0),
          anchor: new google.maps.Point(20, 20)
        });
        clearInterval(timer);
      }
    }, 10);
  }
      window.onload = initMap;

       
    </script>
    <footer><a href="https://www.discoverhongkong.com/us/index.html" target="_blank" rel="noopener noreferrer">Discover Hong Kong</a><br>
      &copy; Copyright 2024 <a href="https://janetckm.github.io/">Ka Man Janet CHOI</a></footer>
  </body>
</html>
